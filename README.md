# MarketScoup

Инструмент для анализа рынка заведений общественного питания с использованием LLM для сегментации, оценки финансов и агрегации отзывов.

## Описание

MarketScoup позволяет:
- Находить похожие заведения по тематике и ценовому сегменту
- Оценивать финансовые показатели (выручка, расходы, доходы, средний чек)
- Собирать и анализировать отзывы из Яндекс.Карт и 2ГИС
- Получать развёрнутые характеристики заведений

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd marketscoup
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` в корне проекта:
```bash
# LLM Configuration
LLM_PROVIDER=perplexity
LLM_API_KEY=your_api_key_here
LLM_MODEL=sonar-reasoning-pro

# Optional: Proxy settings
HTTP_PROXY=
HTTPS_PROXY=

# Optional: Logging
LOG_LEVEL=INFO

# Optional: Default location
DEFAULT_CITY=Москва
DEFAULT_COUNTRY=RU
```

## Использование

### CLI

```bash
python -m marketscoup.cli --query "Рестораны мясные среднего ценового сегмента Москва" --top 5
```

### Параметры

- `--query` (обязательный) - Описание заведения для поиска похожих
- `--top` (опционально, по умолчанию 10) - Количество заведений для анализа

### Пример вывода

Результат возвращается в формате JSON с информацией о:
- Заведениях (название, адрес, категория, URL)
- Финансовых показателях (выручка, расходы, доходы, средний чек)
- Отзывах (рейтинг, общее мнение, плюсы, минусы)
- Рейтинге схожести с запросом

## Структура проекта

```
marketscoup/
├── marketscoup/
│   ├── cli.py              # CLI интерфейс
│   ├── config.py          # Конфигурация
│   ├── orchestrator.py    # Основной пайплайн
│   ├── domain/
│   │   └── models.py      # Модели данных
│   ├── llm/
│   │   └── client.py      # LLM клиент
│   └── modules/
│       ├── segment.py     # Сегментация заведений
│       ├── finance.py     # Финансовая оценка
│       ├── reviews.py     # Сбор отзывов
│       └── aggregator.py  # Агрегация данных
├── requirements.txt
├── pyproject.toml
└── README.md
```

## Особенности

- **Умная сегментация**: Приоритет тематике, затем ценовому сегменту
- **Финансовая оценка**: LLM-оценка на основе среднего чека и посещаемости
- **Анализ отзывов**: Развёрнутое описание особенностей заведения
- **Рейтинг схожести**: Оценка соответствия запросу (0.0-1.0)

## Требования

- Python 3.11+
- API ключ для LLM провайдера (Perplexity по умолчанию)

## Лицензия

[Укажите лицензию]

